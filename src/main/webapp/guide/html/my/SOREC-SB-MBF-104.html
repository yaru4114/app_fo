<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge; chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="format-detection" content="telephone=no">
    <!-- <meta name="robots" content="ALL"> -->
    <meta name="title" content="서린상사">
    <link rel="shortcut icon" href="/guide/images/favicon.ico">
    <meta name="keywords" content="서린상사, 서린상사(주), 비철금속전문기업, 아연, 황산">
    <meta name="description" content="세계를 선도하는 종합비철무역상사 - 서린상사">
    <title>마이페이지 홈 대시보드 | SORIN e-Commerce</title>
    <link rel="stylesheet" href="/guide/css/common.css">
    <link rel="stylesheet" href="/guide/css/sorin.css">
    <script src="/guide/js/jquery-3.6.0.min.js"></script>
</head>
<body>
<div class="wrapper">
   <!-- header include -->
   <div class="header-wrap include-wrap"></div>
   <script type="text/javascript"> $(".header-wrap").load("/guide/html/include/header.html");</script>
   <!-- //header include -->
    <div class="container">
   		<!-- dashboard include -->
      	<div class="dashboard-wrap include-wrap"></div>
      	<script type="text/javascript"> $(".dashboard-wrap").load("/guide/html/include/my/dashboard.html");</script>
        <!-- //dashboard include -->       
        <div class="section my">
            <div class="inwrap table">
            	<!-- lnb include -->            	
                <div class="lnb-wrap include-wrap"></div>
   				<script type="text/javascript"> $(".lnb-wrap").load("/guide/html/include/my/lnb.html");</script>
                <!-- lnb include --> 
                <div class="content">
                    <div class="section trade-list">
                        <div class="hgroup">
                            <h2 class="h3">최근 거래내역</h2>
                            <div class="btns">
                                <button type="button" class="btn-all-arrow">전체보기</button>
                            </div>
                        </div>                        
                        <!-- 주문현황 관련 변경 시작 | 2021-11-29 -->
                        <table class="tbl t2">
                        <caption>최근 거래내역 : 주문요청, 주문확정, 배송중, 배송완료, 취소/교환/반품 건수</caption>
                        <colgroup>
                        <col span="6" style="width:16.66%;">
                        </colgroup>
                        <thead>
                            <tr>
                                <th scope="col">주문완료</th>
                                <th scope="col">배송준비</th>
                                <th scope="col">출고지시</th>
                                <th scope="col">배차중</th>
                                <th scope="col">배송중</th>
                                <th scope="col">배송완료</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><a href="#" class="order-ea fc-blue">12</a></td>
                                <td><a href="#" class="order-ea">1</a></td>
                                <td><a href="#" class="order-ea">4</a></td>
                                <td><a href="#" class="order-ea">2</a></td>
                                <td><a href="#" class="order-ea">1</a></td>
                                <td><a href="#" class="order-ea">4</a></td>
                            </tr>
                            <!-- no-data -->
                            <tr>
                                <td colspan="6">
                                    <div class="no-data fs14 h80px">최근 거래 내역이 없습니다.</div>
                                </td>
                            </tr>
                            <!--// no-data -->
                        </tbody>
                        </table>
                        <!-- //주문현황 관련 변경 끝-->
                        
                    </div>

                    <div class="section payment-list">
                        <div class="hgroup">
                            <h2 class="h3">미납 <span class="fc-red bold"><span class="fc-red">1</span>건</span> / 대기 <span class="fc-red bold"><span class="fc-red">0</span>건</span> / 예정 <span class="fc-red bold"><span class="fc-red">2</span>건</span> 결제 내역</h2>
                            <div class="btns">
                                <button type="button" class="btn-all-arrow">전체보기</button>
                            </div>
                        </div>
                        <ul class="list t2">
                            <li>
                                <div class="cart-item-wrap">
                                    <figure class="figure">
                                        <img src="/guide/images/my/al_sum.jpg" alt="알루미늄" data-popup="modal" data-target="sorinModalPayDetail">
                                    </figure>
                                    <div class="figure-con">
                                        <p class="pd-name fc-blue" data-popup="modal" data-target="sorinModalPayDetail"><span class="pd-label">AL</span>20220428-S00002</p>
                                        <table class="tbl t4">
                                            <colgroup>
                                                <col span="5" style="width:20%;">
                                            </colgroup>
                                            <thead>
                                                <tr>
                                                    <th scope="col">결제수단</th>
                                                    <th scope="col">주문금액</th>
                                                    <th scope="col">e-wallet 결제액</th>
                                                    <th scope="col">입금액</th>
                                                    <th scope="col">입금일</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td>e-wallt+B2B대출보증</td>
                                                    <td>100,000,000</td>
                                                    <td>200,000,000</td>
                                                    <td>200,000,000</td>
                                                    <td>2022-05-01</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    
                                </div>
                                <div class="pay-wrap flex-between">
                                    <div class="pay-condition flex-start">
                                        <span class="item late">미납</span>
                                        <div class="mt-date">
                                            <span class="tit">결제예정일</span>
                                            <span class="item">2022-05-04</span>
                                        </div>
                                        <div class="mt-price">
                                            <span class="tit">결제예정액</span>
                                            <span class="item">60,000,000 원</span>
                                        </div>
                                    </div>
                                    <div class="btns">
                                        <button type="button" class="btn-blue-md" data-popup="modal" data-target="sorinModalEwallet">e-Wallet<span class="ripple"></span></button>
                                        <button type="button" class="btn-stroke-md blue" data-popup="modal" data-target="sorinModalBankDefault">매매계약서 생성<span class="ripple"></span></button>
                                    </div>
                                </div>
                            </li>
                            <li>
                                <div class="cart-item-wrap">
                                    <figure class="figure">
                                        <img src="/guide/images/my/al_sum.jpg" alt="알루미늄" data-popup="modal" data-target="sorinModalPayDetail">
                                    </figure>
                                    <div class="figure-con">
                                        <p class="pd-name fc-blue" data-popup="modal" data-target="sorinModalPayDetail"><span class="pd-label">ZN</span>20220428-S00002</p>
                                        <table class="tbl t4">
                                            <colgroup>
                                                <col span="5" style="width:20%;">
                                            </colgroup>
                                            <thead>
                                                <tr>
                                                    <th scope="col">결제수단</th>
                                                    <th scope="col">주문금액</th>
                                                    <th scope="col">e-wallet 결제액</th>
                                                    <th scope="col">입금액</th>
                                                    <th scope="col">입금일</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td>e-wallt+B2B대출보증</td>
                                                    <td>100,000,000</td>
                                                    <td>200,000,000</td>
                                                    <td>200,000,000</td>
                                                    <td>2022-05-01</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    
                                </div>
                                <div class="pay-wrap flex-between">
                                    <div class="pay-condition flex-start">
                                        <span class="item soon">예정</span>
                                        <div class="mt-date">
                                            <span class="tit">결제예정일</span>
                                            <span class="item">2022-05-10</span>
                                        </div>
                                        <div class="mt-price">
                                            <span class="tit">결제예정액</span>
                                            <span class="item">60,000,000 원</span>
                                        </div>
                                    </div>
                                    <div class="btns">
                                        <button type="button" class="btn-blue-md" onClick="location.href='#'">은행 바로가기<span class="ripple"></span></button>
                                        <button type="button" class="btn-gray-md" data-popup="modal" data-target="">매매계약서 취소<span class="ripple"></span></button>
                                    </div>
                                </div>
                            </li>
                            <li>
                                <div class="cart-item-wrap">
                                    <figure class="figure">
                                        <img src="/guide/images/my/al_sum.jpg" alt="알루미늄" data-popup="modal" data-target="sorinModalPayDetail">
                                    </figure>
                                    <div class="figure-con">
                                        <p class="pd-name fc-blue" data-popup="modal" data-target="sorinModalPayDetail"><span class="pd-label">AL</span>20220428-S00002</p>
                                        <table class="tbl t4">
                                            <colgroup>
                                                <col span="5" style="width:20%;">
                                            </colgroup>
                                            <thead>
                                                <tr>
                                                    <th scope="col">결제수단</th>
                                                    <th scope="col">주문금액</th>
                                                    <th scope="col">e-wallet 결제액</th>
                                                    <th scope="col">입금액</th>
                                                    <th scope="col">입금일</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td>e-wallt+B2B대출보증</td>
                                                    <td>100,000,000</td>
                                                    <td>200,000,000</td>
                                                    <td>200,000,000</td>
                                                    <td>2022-05-01</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    
                                </div>
                                <div class="pay-wrap flex-between">
                                    <div class="pay-condition flex-start">
                                        <span class="item soon">예정</span>
                                        <div class="mt-date">
                                            <span class="tit">결제예정일</span>
                                            <span class="item">2022-05-10</span>
                                        </div>
                                        <div class="mt-price">
                                            <span class="tit">결제예정액</span>
                                            <span class="item">60,000,000 원</span>
                                        </div>
                                    </div>
                                    <div class="btns">
                                        <button type="button" class="btn-blue-md" data-popup="modal" data-target="sorinModalSoonRepay">e-Wallet<span class="ripple"></span></button>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>

                    <div class="section alram-list">
                        <div class="hgroup">
                            <h2 class="h3">최근 알림 내역</h2>
                            <div class="btns">
                                <button type="button" class="btn-all-arrow">전체보기</button>
                            </div>
                        </div>
                        <table class="tbl t2">
                        <caption>최근 알림 내역</caption>
                        <colgroup>
                        <col span="2" style="width:50%;">
                        </colgroup>
                        <thead>
                            <tr>
                                <th scope="col">알림내용</th>
                                <th scope="col">알림시간</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><div class="order-alarm">알루미늄미(P1020) 2,470,000 도달</div></td>
                                <td><div class="order-alarm">2021-05-06 10:50:20</div></td>
                            </tr>
                            <tr>
                                <td><div class="order-alarm">알루미늄미(P1020) 2,470,000 도달</div></td>
                                <td><div class="order-alarm">2021-05-06 10:50:20</div></td>
                            </tr>
                            <tr>
                                <td><div class="order-alarm">Zinc Diecast Ingot 3,241,250 도달</div></td>
                                <td><div class="order-alarm">2021-05-05 14:10:00</div></td>
                            </tr>
                            <!-- no-data -->
                            <tr>
                                <td colspan="2">
                                    <div class="no-data fs14 h180px">최근 알림 내역이 없습니다.</div>
                                </td>
                            </tr>
                            <!--// no-data -->
                        </tbody>
                        </table>
                    </div>

                    <div class="section quest-list">
                        <div class="hgroup">
                            <h2 class="h3">최근 문의/답변 내역</h2>
                            <div class="btns">
                                <button type="button" class="btn-all-arrow">전체보기</button>
                            </div>
                        </div>
                        <table class="tbl t2">
                        <caption>최근 문의/답변 내역</caption>
                        <tbody>
                            <tr>
                                <td>
                                    <a href="#" class="order-quest">
                                        <span class="label-gray">답변대기</span>
                                        <div class="quest-desc">
                                            <p class="quest-info">주문문의 &lt; 결제 | ORDER2021203477261 (acrioncat 2021-03-27)</p>
                                            <p class="quest-stit">거래소, 기업사냥형 부정거래 적발 시스템 가동…7개 종목서 2000억원 적발</p>
                                        </div>
                                    </a>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <a href="#" class="order-quest">
                                        <span class="label-gray">답변대기</span>
                                        <div class="quest-desc">
                                            <p class="quest-info">주문문의 &lt; 주문방법 | (acrioncat 2021-03-27)</p>
                                            <p class="quest-stit">소진공, 재기 소상공인 취업지원 위한 산&middot;학&middot;관 업무협약 체결</p>
                                        </div>
                                    </a>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <a href="#" class="order-quest">
                                        <span class="label-blue">답변완료</span>
                                        <div class="quest-desc">
                                            <p class="quest-info">주문문의 &lt; 결제 | ORDER2021203477261 (acrioncat 2021-03-27)</p>
                                            <p class="quest-stit">노형욱 국토부장관 "전국 모든 철거 공사현장 긴급 안전점검 실시"</p>
                                        </div>
                                    </a>
                                </td>
                            </tr>
                            <!-- no-data -->
                            <tr>
                                <td>
                                    <div class="no-data fs14 h245px">최근 문의 내역이 없습니다.</div>
                                </td>
                            </tr>
                            <!--// no-data -->
                        </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
   <!-- footer include -->
   <div class="footer-wrap include-wrap"></div>
   <script type="text/javascript"> $(".footer-wrap").load("/guide/html/include/footer.html");</script>
   <!-- //footer include -->
</div>


<!-- MODAL POPUP : 결제상세내역 -->
<div class="popup modal repay-detail active" id="sorinModalPayDetail">
    <div class="modal-content w1000px">
        <div class="max-width my">
            <div class="modal-close"><button type="button" class="modal-x"><span class="hidden">팝업 닫기</span></button></div>
            <!-- <div class="div-scroll-y"> -->
                <form class="form-chk">
                    <div class="section">
                        <div class="article list">
                            <h1 class="h2-pd">결제 상세 내역</h1>
                            <table class="tbl-v mt30">
                                <caption>결제 상세 내역</caption>
                                <colgroup>
                                    <col style="width:15rem;">
                                    <col>
                                </colgroup>
                                <tbody>
                                    <tr>
                                        <th scope="row">e-wallet 잔고</th>
                                        <td>
                                            <p>20220428-S00002</p>
                                        </td>
                                        <th scope="row">주문일시</th>
                                        <td>
                                            <p>2022-04-28 11:57:32</p>
                                        </td>
                                    </tr>
                                    <tr>
                                        <th scope="row">주문금액</th>
                                        <td>
                                        <p>100,000,000원(VAT 포함)</p>
                                        </td>
                                        <th scope="row">결제수단</th>
                                        <td>
                                        <p>e-Wallet + B2B 담보보증</p>
                                        </td>
                                    </tr>
                                    <tr>
                                        <th scope="row"><label for="refundTarget">결제 예정일</label></th>
                                        <td>
                                        <p>2022-09-27</p>
                                        </td>
                                        <th scope="row"><label for="refundTarget">결제상태</label></th>
                                        <td>
                                        <p class="pay-condition">
                                            <span class="item soon">예정</span>
                                            <!-- <span class="item late">미납</span> -->
                                            <!-- <span class="item complete">완료</span> -->
                                        </p>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                            <table class="tbl t2 mt30">
                                <caption>결제 상세 내역</caption>
                                <thead>
                                    <tr>
                                        <th scope="col" class="num">No</th>
                                        <th scope="col" class="date">결제일시</th>
                                        <th scope="col" class="price">결제액</th>
                                        <th scope="col" class="remain">남은 결제액</th>
                                        <th scope="col" class="bigo">적요</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- 현금결제만 한 경우 -->
                                    <tr>
                                        <td class="center">1</td>
                                        <td class="center">2022-04-28 12:30:57</td>
                                        <td class="center">20,000,000</td>
                                        <td class="center">80,000,000</td>
                                        <td class="center">현금결제</td>
                                    </tr>
                                    <!-- 결제 정보가 없는 경우 -->
                                    <tr>
                                        <td colspan="5" class="center">결제 정보가 없습니다.</td>
                                    </tr>
                                    <!-- 여러가지 결제를 혼합한 경우 -->
                                    <tr>
                                        <td class="td-import center">2</td>
                                        <td class="td-import center">2022-04-28 12:30:57</td>
                                        <td class="td-import center">1,000,000</td>
                                        <td class="td-import center">79,000,000</td>
                                        <td class="td-import center">중량변동금</td>
                                    </tr>
                                    <tr>
                                        <td class="td-import center">2</td>
                                        <td class="td-import center">2022-04-28 12:30:57</td>
                                        <td class="td-import center">50,000,000</td>
                                        <td class="td-import center total-remain">29,000,000</td>
                                        <td class="td-import center">현금상환</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="btn-wrap">
                            <button type="button" class="btn-blue-big modal-x">확인</button>
                        </div>
                    </div>
                </form>
            <!-- </div>// .div-scroll-y -->

        </div><!--// .max-width -->
    </div>
</div>
<!--// MODAL POPUP : 결제상세내역 -->


<!-- script core -->
<script src="/guide/js/ui/1.12.1/jquery-ui.min.js"></script>
<script src="/guide/js/select2/select2.min.js"></script>
<!-- script extra -->
<script src="/guide/js/modernizr/2.8.3/modernizr.min.js"></script>
<script src="/guide/js/prefixfree/1.0.0/prefixfree.min.js"></script>
<script src="/guide/js/swiper/6.7.0/swiper.js"></script>
<!-- script custom -->
<script src="/guide/js/sorin.js"></script>
<script src="/guide/js/sorin-my.js"></script>
<script src="/guide/js/sorin-layout.js"></script>
<!-- script embedded -->

<script>
// 숫자와 콤마만 입력가능하게 하기
function comma(str) {
    str = String(str);
    return str.replace(/(\d)(?=(?:\d{3})+(?!\d))/g, '$1,');
}

function uncomma(str) {
    str = String(str);
    if (str.substr(0,1) === '0') {
        str = str.substr(1);
    }
    return str.replace(/[^\d]+/g, '');
} 

function inputNumberFormat(obj) {
    obj.value = comma(uncomma(obj.value));
}

function inputOnlyNumberFormat(obj) {
    obj.value = onlynumber(uncomma(obj.value));
}

function onlynumber(str) {
    str = String(str);
    return str.replace(/(\d)(?=(?:\d{3})+(?!\d))/g,'$1');
}

// 인출하기 팝업 : 버튼 값 표기
$(document).on('click', '.refund-btn button', function() {
    $(this).addClass('btn-blue-md').removeClass('btn-stroke-md').siblings('button').addClass('btn-stroke-md').removeClass('btn-blue-md');

    let targetPrice = $(this).parents().siblings('.refund-input').find('#refundTarget');
    let targetValue = Math.abs($(this).attr('data-value'));
    let newPrice = String(parseInt(targetValue)).replace(/\B(?=(\d{3})+(?!\d))/g, ",");

    targetPrice.val(newPrice);
    numTohan(newPrice);
});

// 정정하기 버튼 
$(document).on('click', '.btn-correction', function() {
    $(this).siblings('#refundTarget').val('');
    $(this).siblings('#refundTargetText').val('');
    $(this).parents().siblings('.refund-btn').find('button.btn-blue-md').removeClass('btn-blue-md').addClass('btn-stroke-md');
});

// 금액 한글 변경
function numTohan(num) {
    // 변경 대상
    let transTarget = document.getElementById('refundTargetText');

    if(num == 'undefined' || num == null || num == NaN || num == '') {
        // return '0';
        transTarget.value = '';
        return false;
    }
    num = parseInt((num + '').replace(/[^0-9]/g, ''), 10) + ''; // 숫자/문자/돈 을 숫자만 있는 문자열로 변환
    
    if(num == '0') {
        // return '영';
        transTarget.value = '영';
        return false;
    }
    var number = ['영', '일', '이', '삼', '사', '오', '육', '칠', '팔', '구'];
    var unit = ['', '만', '억', '조', '경'];
    var smallUnit = ['천', '백', '십', ''];
    var result = []; //변환된 값을 저장할 배열
    var unitCnt = Math.ceil(num.length / 4); //단위 갯수. 숫자 10000은 일단위와 만단위 2개이다.
    
    num = num.padStart(unitCnt * 4, '0') //4자리 값이 되도록 0을 채운다

    var regexp = /[\w\W]{4}/g; //4자리 단위로 숫자 분리
    var array = num.match(regexp);
    //낮은 자릿수에서 높은 자릿수 순으로 값을 만든다(그래야 자릿수 계산이 편하다)
    for(var i = array.length - 1, unitCnt = 0; i >= 0; i--, unitCnt++) {
        var hanValue = _makeHan(array[i]); //한글로 변환된 숫자
        if(hanValue == '') //값이 없을땐 해당 단위의 값이 모두 0이란 뜻.
            continue;
        result.unshift(hanValue + unit[unitCnt]); //unshift는 항상 배열의 앞에 넣는다.
    }
    
    //여기로 들어오는 값은 무조건 네자리이다. 1234 -> 일천이백삼십사
    function _makeHan(text) {
        var str = '';
        for(var i = 0; i < text.length; i++) {
            var num = text[i];
            if(num == '0') //0은 읽지 않는다
                continue;
            str += number[num] + smallUnit[i];
        }
        return str;
    }

    transTarget.value = result.join('') + '원';
}

</script>

</body>
</html>